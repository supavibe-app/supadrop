(this["webpackJsonpcandy-machine-mint"]=this["webpackJsonpcandy-machine-mint"]||[]).push([[0],{151:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return j})),n.d(t,"c",(function(){return x}));var r,a=n(18),i=n(1),o=n.n(i),c=n(20),s=n(3),u=n(33),l=n(54),d=n(55),b=n(49),p=new u.e.PublicKey("faircnAB9k59Y4TXmLabBULeuTLgV7TkGMGNkjnA15j");!function(e){e.Brewing="Brewing",e.Finished="Finished",e.PastDue="Past Due"}(r||(r={}));var h=function(){var e=Object(s.a)(o.a.mark((function e(t,n,r){var a,i,s,l,d,b,h,f,m,j,x,y,O;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new u.c(r,t,{preflightCommitment:"recent"}),e.next=3,u.b.fetchIdl(p,a);case 3:return i=e.sent,s=new u.b(i,p,a),e.next=7,s.account.fairLaunch.fetch(n);case 7:return l=e.sent,e.next=10,v(l.tokenMint,t.publicKey);case 10:return d=e.sent,b=Object(c.a)(d,2),h=b[0],f=b[1],e.prev=14,e.next=17,s.account.fairLaunchTicket.fetch(h);case 17:m=e.sent,e.next=23;break;case 20:e.prev=20,e.t0=e.catch(14),console.log("No ticket");case 23:return e.next=25,s.provider.connection.getBalance(l.treasury);case 25:return j=e.sent,x=new Uint8Array([]),e.next=29,g(l.tokenMint);case 29:return y=e.sent[0],e.prev=30,e.next=33,s.provider.connection.getAccountInfo(y);case 33:O=e.sent,x=new Uint8Array((null===O||void 0===O?void 0:O.data)||[]),e.next=41;break;case 37:e.prev=37,e.t1=e.catch(30),console.log("Could not find fair launch lottery."),console.log(e.t1);case 41:return e.abrupt("return",{id:n,state:l,program:s,ticket:{pubkey:h,bump:f,data:m},lottery:{pubkey:y,data:x},treasury:j});case 42:case"end":return e.stop()}}),e,null,[[14,20],[30,37]])})));return function(t,n,r){return e.apply(this,arguments)}}(),f=function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,i,c,s,d,p,h,f,j,x;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(n.state.tokenMint,t.publicKey);case 2:return r=e.sent[0],i=n.ticket.data,e.next=6,g(n.state.tokenMint);case 6:return c=e.sent[0],e.next=9,Object(b.d)(n.state.tokenMint,t.publicKey);case 9:if(s=e.sent[0],!(null===i||void 0===i?void 0:i.amount.gt(n.state.currentMedian))){e.next=20;break}return console.log("Adjusting down...",null===i||void 0===i?void 0:i.amount.toNumber(),n.state.currentMedian.toNumber()),e.next=14,m(n.program,n.state.currentMedian.toNumber(),t,n,r);case 14:return d=e.sent,p=d.remainingAccounts,h=d.instructions,f=d.signers,e.next=20,n.program.rpc.adjustTicket(n.state.currentMedian,{accounts:{fairLaunchTicket:r,fairLaunch:n.id,fairLaunchLotteryBitmap:c,treasury:n.state.treasury,systemProgram:u.e.SystemProgram.programId,clock:u.e.SYSVAR_CLOCK_PUBKEY},__private:{logAccounts:!0},instructions:h.length>0?h:void 0,remainingAccounts:[{pubkey:t.publicKey,isSigner:!0,isWritable:!0}].concat(Object(a.a)(p)),signers:f});case 20:return e.next=22,n.program.provider.connection.getAccountInfo(s);case 22:return j=e.sent,x=j?[]:[Object(b.b)(s,t.publicKey,t.publicKey,n.state.tokenMint)],e.next=26,n.program.rpc.punchTicket({accounts:{fairLaunchTicket:r,fairLaunch:n.id,fairLaunchLotteryBitmap:c,payer:t.publicKey,buyerTokenAccount:s,tokenMint:n.state.tokenMint,tokenProgram:l.b},instructions:x.length>0?x:void 0});case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var t=Object(s.a)(o.a.mark((function t(n,r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),r.toBuffer()],p);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),g=function(){var t=Object(s.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),e.from("lottery")],p);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(o.a.mark((function e(t,n,r,a,i){var s,p,h,f,v,g,m,j,x,y,O;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",{remainingAccounts:[],instructions:[],signers:[],amountLamports:0});case 2:if(s=a.ticket,p=[],h=[],f=[],v=0,a.state.treasuryMint){e.next=11;break}v=s||0!==n?Math.ceil(n*d.LAMPORTS_PER_SOL):a.state.data.priceRangeStart.toNumber(),e.next=23;break;case 11:return g=u.e.Keypair.generate(),f.push(g),h.push(l.c.createApproveInstruction(l.b,a.state.treasuryMint,g.publicKey,r.publicKey,[],amountNumber+a.state.data.fees.toNumber())),p.push({pubkey:a.state.treasuryMint,isWritable:!0,isSigner:!1}),e.t0=p,e.next=18,Object(b.d)(a.state.treasuryMint,r.publicKey);case 18:e.t1=e.sent[0],e.t2={pubkey:e.t1,isWritable:!0,isSigner:!1},e.t0.push.call(e.t0,e.t2),p.push({pubkey:g.publicKey,isWritable:!1,isSigner:!0}),p.push({pubkey:l.b,isWritable:!1,isSigner:!1});case 23:if(!s.data){e.next=39;break}return e.next=26,Object(b.e)(a.state.tokenMint,null===(m=s.data)||void 0===m?void 0:m.seq);case 26:return j=e.sent,x=Object(c.a)(j,2),y=x[0],O=x[1],e.next=32,t.provider.connection.getAccountInfo(y);case 32:if(e.sent){e.next=39;break}return e.t3=h,e.next=37,t.instruction.createTicketSeq(O,{accounts:{fairLaunchTicketSeqLookup:y,fairLaunch:a.id,fairLaunchTicket:i,payer:r.publicKey,systemProgram:u.e.SystemProgram.programId,rent:u.e.SYSVAR_RENT_PUBKEY},signers:[]});case 37:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 39:return e.abrupt("return",{remainingAccounts:p,instructions:h,signers:f,amountLamports:v});case 40:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,a,i,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(b.d)(n.state.tokenMint,t.publicKey);case 4:if(r=e.sent[0],a=u.e.Keypair.generate(),i=[a],c=[l.c.createApproveInstruction(l.b,r,a.publicKey,t.publicKey,[],1)],s=[],!n.state.treasuryMint){e.next=17;break}return s.push({pubkey:n.state.treasuryMint,isWritable:!0,isSigner:!1}),e.t0=s,e.next=14,Object(b.d)(n.state.treasuryMint,t.publicKey);case 14:e.t1=e.sent[0],e.t2={pubkey:e.t1,isWritable:!0,isSigner:!1},e.t0.push.call(e.t0,e.t2);case 17:return console.log("tfr",n.state.treasury.toBase58(),t.publicKey.toBase58(),r.toBase58()),e.next=20,n.program.rpc.receiveRefund({accounts:{fairLaunch:n.id,treasury:n.state.treasury,buyer:t.publicKey,buyerTokenAccount:r,transferAuthority:a.publicKey,tokenMint:n.state.tokenMint,tokenProgram:l.b,systemProgram:u.e.SystemProgram.programId,clock:u.e.SYSVAR_CLOCK_PUBKEY},__private:{logAccounts:!0},remainingAccounts:s,instructions:c,signers:i});case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(s.a)(o.a.mark((function e(t,n,r){var i,s,l,d,b,p,h,f,j,x,y;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return i=r.ticket.data,e.next=5,v(r.state.tokenMint,n.publicKey);case 5:return s=e.sent,l=Object(c.a)(s,2),d=l[0],b=l[1],e.next=11,m(r.program,t,n,r,d);case 11:if(p=e.sent,h=p.remainingAccounts,f=p.instructions,j=p.signers,x=p.amountLamports,!i){e.next=24;break}return e.next=19,g(r.state.tokenMint);case 19:return y=e.sent[0],console.log("Anchor wallet",n.publicKey.toBase58(),x),e.next=23,r.program.rpc.adjustTicket(new u.a(x),{accounts:{fairLaunchTicket:d,fairLaunch:r.id,fairLaunchLotteryBitmap:y,treasury:r.state.treasury,systemProgram:u.e.SystemProgram.programId,clock:u.e.SYSVAR_CLOCK_PUBKEY},__private:{logAccounts:!0},remainingAccounts:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}].concat(Object(a.a)(h)),signers:j,instructions:f.length>0?f:void 0});case 23:return e.abrupt("return");case 24:return e.prev=24,console.log("Amount",x),e.next=28,r.program.rpc.purchaseTicket(b,new u.a(x),{accounts:{fairLaunchTicket:d,fairLaunch:r.id,treasury:r.state.treasury,buyer:n.publicKey,payer:n.publicKey,systemProgram:u.e.SystemProgram.programId,rent:u.e.SYSVAR_RENT_PUBKEY,clock:u.e.SYSVAR_CLOCK_PUBKEY},remainingAccounts:h,signers:j,instructions:f.length>0?f:void 0});case 28:e.next=34;break;case 30:throw e.prev=30,e.t0=e.catch(24),console.log(e.t0),e.t0;case 34:case"end":return e.stop()}}),e,null,[[24,30]])})));return function(t,n,r){return e.apply(this,arguments)}}()}).call(this,n(6).Buffer)},231:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m}));var r=n(1),a=n.n(r),i=n(3),o=n(33),c=n(54),s=n(55),u=n(481),l=n(49),d=new o.e.PublicKey("cndyAnrLdpjq1Ssp1z8xxDsB8dxe7u4HL5Nxi2K5WXZ"),b=new o.e.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),p=function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var o,c,s,u,l=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>3&&void 0!==l[3]?l[3]:"recent",o=l.length>4&&void 0!==l[4]&&l[4],c=!1,s={slot:0,confirmations:0,err:null},u=0,e.next=7,new Promise(function(){var e=Object(i.a)(a.a.mark((function e(u,l){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){c||(c=!0,console.log("Rejecting for timeout..."),l({timeout:!0}))}),n);case 1:if(c||!o){e.next=7;break}return Object(i.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,s=n&&n.value[0],c||(s?s.err?(console.log("REST error for",t,s),c=!0,l(s.err)):s.confirmations?(console.log("REST confirmation for",t,s),c=!0,u(s)):console.log("REST no confirmations for",t,s):console.log("REST null result for",t,s)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=5,j(2e3);case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return s=e.sent,r._signatureSubscriptions[u]&&r.removeSignatureListener(u),c=!0,console.log("Returning status",s),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),h=function(t,n,r,a){var i=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:o.e.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.b,isSigner:!1,isWritable:!1},{pubkey:o.e.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new o.e.TransactionInstruction({keys:i,programId:l.a,data:e.from([])})},f=function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i,c,s,u,l,b,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new o.c(r,t,{preflightCommitment:"recent"}),e.next=3,o.b.fetchIdl(d,i);case 3:return c=e.sent,s=new o.b(c,d,i),e.next=7,s.account.candyMachine.fetch(n);case 7:return u=e.sent,l=u.data.itemsAvailable.toNumber(),b=u.itemsRedeemed.toNumber(),p=l-b,e.abrupt("return",{id:n,program:s,state:{itemsAvailable:l,itemsRedeemed:b,itemsRemaining:p,isSoldOut:0===p,isActive:u.data.goLiveDate.toNumber()<(new Date).getTime()/1e3,goLiveDate:u.data.goLiveDate,treasury:u.wallet,tokenMint:u.tokenMint,config:u.config,price:u.data.price}});case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),v=function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e.PublicKey.findProgramAddress([e.from("metadata"),b.toBuffer(),n.toBuffer(),e.from("edition")],b);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e.PublicKey.findProgramAddress([e.from("metadata"),b.toBuffer(),n.toBuffer()],b);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i,d,p,f,m,j,x,y,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.e.Keypair.generate(),e.next=3,Object(l.d)(r.publicKey,n);case 3:return i=e.sent[0],e.next=6,Object(l.d)(t.state.tokenMint,n);case 6:return d=e.sent[0],p=t.id,f=[],m=[r],e.t0=o.e.SystemProgram,e.t1=n,e.t2=r.publicKey,e.t3=c.a.span,e.next=16,t.program.provider.connection.getMinimumBalanceForRentExemption(c.a.span);case 16:return e.t4=e.sent,e.t5=c.b,e.t6={fromPubkey:e.t1,newAccountPubkey:e.t2,space:e.t3,lamports:e.t4,programId:e.t5},e.t7=e.t0.createAccount.call(e.t0,e.t6),e.t8=c.c.createInitMintInstruction(c.b,r.publicKey,0,n,n),e.t9=h(i,n,n,r.publicKey),e.t10=c.c.createMintToInstruction(c.b,r.publicKey,i,n,[],1),j=[e.t7,e.t8,e.t9,e.t10],t.state.tokenMint&&(x=o.e.Keypair.generate(),m.push(x),f.push({pubkey:d,isWritable:!0,isSigner:!1}),f.push({pubkey:x.publicKey,isWritable:!1,isSigner:!0}),j.push(c.c.createApproveInstruction(c.b,d,x.publicKey,n,[],t.state.price.toNumber()))),e.next=27,g(r.publicKey);case 27:return y=e.sent,e.next=30,v(r.publicKey);case 30:return O=e.sent,e.t11=j,e.next=34,t.program.instruction.mintNft({accounts:{config:t.state.config,candyMachine:p,payer:n,wallet:t.state.treasury,mint:r.publicKey,metadata:y,masterEdition:O,mintAuthority:n,updateAuthority:n,tokenMetadataProgram:b,tokenProgram:c.b,systemProgram:s.SystemProgram.programId,rent:o.e.SYSVAR_RENT_PUBKEY,clock:o.e.SYSVAR_CLOCK_PUBKEY},remainingAccounts:f.length>0?f:void 0});case 34:return e.t12=e.sent,e.t11.push.call(e.t11,e.t12),e.prev=37,e.next=40,Object(u.a)(t.program.provider.connection,t.program.provider.wallet,j,m);case 40:return e.abrupt("return",e.sent.txid);case 43:e.prev=43,e.t13=e.catch(37),console.log(e.t13);case 46:return e.abrupt("return","j");case 47:case"end":return e.stop()}}),e,null,[[37,43]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(e){return new Promise((function(t){return setTimeout(t,e)}))}}).call(this,n(6).Buffer)},481:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,a=n(18),i=n(1),o=n.n(i),c=n(3),s=n(55),u=n(65);!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(r||(r={}));var l=function(){var e=Object(c.a)(o.a.mark((function e(t,n,r,i){var c,l,d,b,h,f,v,g,m,j,x,y=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=y.length>4&&void 0!==y[4]?y[4]:"singleGossip",l=y.length>5&&void 0!==y[5]&&y[5],d=y.length>6?y[6]:void 0,b=y.length>7?y[7]:void 0,n.publicKey){e.next=6;break}throw new u.WalletNotConnectedError;case 6:if(h=new s.Transaction,r.forEach((function(e){return h.add(e)})),e.t0=d,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(c);case 12:e.t0=e.sent;case 13:if(h.recentBlockhash=e.t0.blockhash,l?(f=h).setSigners.apply(f,Object(a.a)(i.map((function(e){return e.publicKey})))):(v=h).setSigners.apply(v,[n.publicKey].concat(Object(a.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(g=h).partialSign.apply(g,Object(a.a)(i)),l){e.next=20;break}return e.next=19,n.signTransaction(h);case 19:h=e.sent;case 20:return b&&b(),e.next=23,p({connection:t,signedTransaction:h});case 23:return m=e.sent,j=m.txid,x=m.slot,e.abrupt("return",{txid:j,slot:x});case 27:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),d=function(){return(new Date).getTime()/1e3},b=15e3;function p(e){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(o.a.mark((function e(t){var n,r,a,i,s,u,l,p,h,v,m,x,y;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,a=t.timeout,i=void 0===a?b:a,s=n.serialize(),u=d(),l=0,e.next=6,r.sendRawTransaction(s,{skipPreflight:!0});case 6:return p=e.sent,console.log("Started awaiting confirmation for",p),h=!1,Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h||!(d()-u<i)){e.next=6;break}return r.sendRawTransaction(s,{skipPreflight:!0}),e.next=4,j(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,g(p,i,r,"recent",!0);case 13:if(v=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!v.err){e.next=19;break}throw console.error(v.err),new Error("Transaction failed: Custom instruction error");case 19:l=(null===v||void 0===v?void 0:v.slot)||0,e.next=47;break;case 22:if(e.prev=22,e.t0=e.catch(10),console.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return m=null,e.prev=28,e.next=31,f(r,n,"single");case 31:m=e.sent.value,e.next=36;break;case 34:e.prev=34,e.t1=e.catch(28);case 36:if(!m||!m.err){e.next=47;break}if(!m.logs){e.next=46;break}x=m.logs.length-1;case 39:if(!(x>=0)){e.next=46;break}if(!(y=m.logs[x]).startsWith("Program log: ")){e.next=43;break}throw new Error("Transaction failed: "+y.slice("Program log: ".length));case 43:--x,e.next=39;break;case 46:throw new Error(JSON.stringify(m.err));case 47:return e.prev=47,h=!0,e.finish(47);case 50:return console.log("Latency",p,d()-u),e.abrupt("return",{txid:p,slot:l});case 52:case"end":return e.stop()}}),e,null,[[10,22,47,50],[28,34]])})))).apply(this,arguments)}function f(e,t,n){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(o.a.mark((function e(t,n,r){var a,i,c,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,a=n.serializeMessage(),i=n._serialize(a),c=i.toString("base64"),s=[c,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",s);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t,n){return m.apply(this,arguments)}function m(){return m=Object(c.a)(o.a.mark((function e(t,n,r){var a,i,s,u,l,d=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:"recent",i=d.length>4&&void 0!==d[4]&&d[4],s=!1,u={slot:0,confirmations:0,err:null},l=0,e.next=7,new Promise(function(){var e=Object(c.a)(o.a.mark((function e(d,b){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){s||(s=!0,console.log("Rejecting for timeout..."),b({timeout:!0}))}),n);try{l=r.onSignature(t,(function(e,t){s=!0,u={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),b(u)):(console.log("Resolved via websocket",e),d(u))}),a)}catch(p){s=!0,console.error("WS error in setup",t,p)}case 2:if(s||!i){e.next=8;break}return Object(c.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,u=n&&n.value[0],s||(u?u.err?(console.log("REST error for",t,u),s=!0,b(u.err)):u.confirmations?(console.log("REST confirmation for",t,u),s=!0,d(u)):console.log("REST no confirmations for",t,u):console.log("REST null result for",t,u)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=6,j(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return u=e.sent,r._signatureSubscriptions[l]&&r.removeSignatureListener(l),s=!0,console.log("Returning status",u),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function j(e){return new Promise((function(t){return setTimeout(t,e)}))}},49:function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return v}));var r=n(1),a=n.n(r),i=n(3),o=n(33),c=n(54),s=n(55),u=new o.e.PublicKey("faircnAB9k59Y4TXmLabBULeuTLgV7TkGMGNkjnA15j"),l=function(e){if(e)return new Date(1e3*e.toNumber())},d=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),b={format:function(e){return e?d.format(e):"--"},asNumber:function(e){if(e)return e.toNumber()/s.LAMPORTS_PER_SOL}},p=new o.e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),h=function(){var t=Object(i.a)(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.e.PublicKey.findProgramAddress([e.from("fair_launch"),n.toBuffer(),r.toArrayLike(e,"le",8)],u);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.e.PublicKey.findProgramAddress([n.toBuffer(),c.b.toBuffer(),t.toBuffer()],p);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function v(t,n,r,a){var i=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.b,isSigner:!1,isWritable:!1},{pubkey:s.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new s.TransactionInstruction({keys:i,programId:p,data:e.from([])})}}).call(this,n(6).Buffer)},507:function(e,t,n){},508:function(e,t,n){},513:function(e,t){},515:function(e,t){},531:function(e,t){},532:function(e,t){},653:function(e,t){},655:function(e,t){},669:function(e,t){},673:function(e,t){},675:function(e,t){},686:function(e,t){},688:function(e,t){},715:function(e,t){},717:function(e,t){},722:function(e,t){},724:function(e,t){},731:function(e,t){},743:function(e,t){},746:function(e,t){},758:function(e,t){},759:function(e,t,n){"use strict";n.r(t);var r,a,i,o,c=n(5),s=n.n(c),u=n(41),l=n.n(u),d=(n(507),n(508),n(10)),b=n(1),p=n.n(b),h=n(3),f=n(20),v=n(230),g=n(175),m=n(792),j=n(781),x=n(788),y=n(780),O=n(778),k=n(789),S=n(779),w=n(491),P=n(494),T=n(787),R=n(477),_=n(172),E=n(383),L=n(19),A=Object(E.a)((function(e){return Object(R.a)({root:{display:"flex",padding:e.spacing(0),"& > *":{margin:e.spacing(.5),marginRight:0,width:e.spacing(6),height:e.spacing(6),display:"flex",flexDirection:"column",alignContent:"center",alignItems:"center",justifyContent:"center",background:"#384457",color:"white",borderRadius:5,fontSize:10}},done:{display:"flex",margin:e.spacing(1),marginRight:0,padding:e.spacing(1),flexDirection:"column",alignContent:"center",alignItems:"center",justifyContent:"center",background:"#384457",color:"white",borderRadius:5,fontWeight:"bold",fontSize:18},item:{fontWeight:"bold",fontSize:18}})})),C=function(e){var t=e.date,n=e.status,r=e.style,a=e.start,i=e.end,o=e.onComplete,s=A(),u=Object(c.useState)(!!(a&&i&&t)&&a.getTime()-Date.now()<0),l=Object(f.a)(u,2),d=l[0],b=(l[1],function(e){var t=e.days,a=e.hours,i=e.minutes,o=e.seconds;return a+=24*t,e.completed?n?Object(L.jsx)("span",{className:s.done,children:n}):null:Object(L.jsxs)("div",{className:s.root,style:r,children:[d&&Object(L.jsx)(w.a,{elevation:0,children:Object(L.jsx)("span",{className:s.item,children:"+"})}),Object(L.jsxs)(w.a,{elevation:0,children:[Object(L.jsx)("span",{className:s.item,children:a<10?"0".concat(a):a}),Object(L.jsx)("span",{children:"hrs"})]}),Object(L.jsxs)(w.a,{elevation:0,children:[Object(L.jsx)("span",{className:s.item,children:i<10?"0".concat(i):i}),Object(L.jsx)("span",{children:"mins"})]}),Object(L.jsxs)(w.a,{elevation:0,children:[Object(L.jsx)("span",{className:s.item,children:o<10?"0".concat(o):o}),Object(L.jsx)("span",{children:"secs"})]})]})});return t&&a&&i&&d&&_.a,t?Object(L.jsx)(_.a,{date:t,onComplete:o,renderer:b}):null},K=n(782),N=n(786),M=n(785),D=n(300),W=n.n(D),B=n(790),I=n(55),F=n(102),Y=n(218),U=n(231),H=n(151),V=n(49),q=Object(g.a)(Y.WalletDialogButton)(r||(r=Object(v.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),z=g.a.div(a||(a=Object(v.a)([""]))),G=Object(g.a)(S.a)(i||(i=Object(v.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),J=function(e){return Object(R.a)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})},X=Object(g.a)(m.a)({color:"#C0D5FE",height:8,"& > *":{height:4},"& .MuiSlider-track":{border:"none",height:4},"& .MuiSlider-thumb":{height:24,width:24,marginTop:-10,background:"linear-gradient(180deg, #604AE5 0%, #813EEE 100%)",border:"2px solid currentColor","&:focus, &:hover, &.Mui-active, &.Mui-focusVisible":{boxShadow:"inherit"},"&:before":{display:"none"}},"& .MuiSlider-valueLabel":{"& > *":{background:"linear-gradient(180deg, #604AE5 0%, #813EEE 100%)"},lineHeight:1.2,fontSize:12,padding:0,width:32,height:32,marginLeft:9}});!function(e){e[e.Phase0=0]="Phase0",e[e.Phase1=1]="Phase1",e[e.Phase2=2]="Phase2",e[e.Lottery=3]="Lottery",e[e.Phase3=4]="Phase3",e[e.Phase4=5]="Phase4",e[e.Unknown=6]="Unknown"}(o||(o={}));var Z=function(e){var t=e.phaseName,n=e.desc,r=e.date,a=e.status;return Object(L.jsxs)(T.a,{container:!0,justifyContent:"center",children:[Object(L.jsxs)(T.a,{xs:6,justifyContent:"center",direction:"column",children:[Object(L.jsx)(P.a,{variant:"h5",style:{fontWeight:600},children:t}),Object(L.jsx)(P.a,{variant:"body1",color:"textSecondary",children:n})]}),Object(L.jsx)(T.a,{xs:6,container:!0,justifyContent:"flex-end",children:Object(L.jsx)(C,{date:Object(V.f)(r),style:{justifyContent:"flex-end"},status:a||"COMPLETE"})})]})};var Q=function(e,t){var n,r,a;if(t>0)return!0;if(!(null===e||void 0===e?void 0:e.lottery.data)||!(null===e||void 0===e?void 0:e.lottery.data.length)||!(null===e||void 0===e||null===(n=e.ticket.data)||void 0===n?void 0:n.seq)||!(null===e||void 0===e?void 0:e.state.phaseThreeStarted))return!1;var i=e.lottery.data[49+Math.floor((null===(r=e.ticket.data)||void 0===r?void 0:r.seq.toNumber())/8)],o=7-(null===(a=e.ticket.data)||void 0===a?void 0:a.seq.toNumber())%8,c=i&Math.pow(2,o);return c>0},$=function(e){var t,n,r,a,i,s,u,l,b,v,g,m,S,R,E,A,C,D,Y,$,ee,te,ne,re,ae,ie,oe,ce,se,ue,le,de,be,pe,he,fe,ve,ge,me,je,xe=Object(c.useState)(0),ye=Object(f.a)(xe,2),Oe=ye[0],ke=ye[1],Se=Object(c.useState)(null),we=Object(f.a)(Se,2),Pe=we[0],Te=we[1],Re=Object(c.useState)(!1),_e=Object(f.a)(Re,2),Ee=_e[0],Le=_e[1],Ae=Object(c.useState)(0),Ce=Object(f.a)(Ae,2),Ke=Ce[0],Ne=Ce[1],Me=Object(F.useWallet)(),De=Object(c.useMemo)((function(){if(Me&&Me.publicKey&&Me.signAllTransactions&&Me.signTransaction)return{publicKey:Me.publicKey,signAllTransactions:Me.signAllTransactions,signTransaction:Me.signTransaction}}),[Me]),We=Object(c.useState)({open:!1,message:"",severity:void 0}),Be=Object(f.a)(We,2),Ie=Be[0],Fe=Be[1],Ye=Object(c.useState)(),Ue=Object(f.a)(Ye,2),He=Ue[0],Ve=Ue[1],qe=Object(c.useState)(),ze=Object(f.a)(qe,2),Ge=ze[0],Je=ze[1],Xe=Object(c.useState)(!1),Ze=Object(f.a)(Xe,2),Qe=Ze[0],$e=Ze[1],et=Object(c.useState)(!1),tt=Object(f.a)(et,2),nt=tt[0],rt=tt[1],at=Object(c.useState)(!1),it=Object(f.a)(at,2),ot=it[0],ct=it[1],st=function(){var t=Object(h.a)(p.a.mark((function t(){var n,r,a,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,Le(!0),!(Me.connected&&(null===Ge||void 0===Ge?void 0:Ge.program)&&Me.publicKey)){t.next=13;break}if(!(null===He||void 0===He||null===(n=He.ticket.data)||void 0===n?void 0:n.state.unpunched)||!Q(He,Oe)){t.next=6;break}return t.next=6,gt();case 6:return t.next=8,Object(U.c)(Ge,Me.publicKey);case 8:return r=t.sent,t.next=11,Object(U.a)(r,e.txTimeout,e.connection,"singleGossip",!1);case 11:(null===(a=t.sent)||void 0===a?void 0:a.err)?Fe({open:!0,message:"Mint failed! Please try again!",severity:"error"}):Fe({open:!0,message:"Congratulations! Mint succeeded!",severity:"success"});case 13:t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),i=t.t0.msg||"Minting failed! Please try again!",t.t0.msg?311===t.t0.code?(i="SOLD OUT!",window.location.reload()):312===t.t0.code&&(i="Minting period hasn't started yet."):t.t0.message?t.t0.message.indexOf("0x138")||(t.t0.message.indexOf("0x137")?i="SOLD OUT!":t.t0.message.indexOf("0x135")&&(i="Insufficient funds to mint. Please fund your wallet.")):i="Transaction Timeout! Please try again.",Fe({open:!0,message:i,severity:"error"});case 20:return t.prev=20,Le(!1),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[0,15,20,23]])})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){Object(h.a)(p.a.mark((function t(){var n,r,a,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(De){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.connection.getBalance(De.publicKey);case 5:return n=t.sent,Te(n),t.next=9,Object(H.a)(De,e.fairLaunchId,e.connection);case 9:if(r=t.sent,Ve(r),t.prev=11,!r.state.tokenMint){t.next=21;break}return t.t0=e.connection,t.next=16,Object(V.d)(r.state.tokenMint,De.publicKey);case 16:return t.t1=t.sent[0],t.next=19,t.t0.getTokenAccountBalance.call(t.t0,t.t1);case 19:(a=t.sent).value&&ke(a.value.uiAmount||0);case 21:t.next=27;break;case 23:t.prev=23,t.t2=t.catch(11),console.log("Problem getting fair launch token balance"),console.log(t.t2);case 27:Ne((r.state.currentMedian||r.state.data.priceRangeStart).toNumber()/I.LAMPORTS_PER_SOL),t.next=34;break;case 30:t.prev=30,t.t3=t.catch(2),console.log("Problem getting fair launch state"),console.log(t.t3);case 34:if(!e.candyMachineId){t.next=48;break}return t.prev=35,t.next=38,Object(U.b)(De,e.candyMachineId,e.connection);case 38:i=t.sent,Je(i),t.next=46;break;case 42:t.prev=42,t.t4=t.catch(35),console.log("Problem getting candy machine state"),console.log(t.t4);case 46:t.next=49;break;case 48:console.log("No candy machine detected in configuration.");case 49:case"end":return t.stop()}}),t,null,[[2,30],[11,23],[35,42]])})))()}),[De,e.candyMachineId,e.connection,e.fairLaunchId]);var ut=V.c.asNumber(null===He||void 0===He?void 0:He.state.data.priceRangeStart),lt=V.c.asNumber(null===He||void 0===He?void 0:He.state.data.priceRangeEnd),dt=V.c.asNumber(null===He||void 0===He?void 0:He.state.data.tickSize),bt=V.c.asNumber(null===He||void 0===He?void 0:He.state.currentMedian),pt=[{value:ut||0,label:"".concat(ut," SOL")},{value:bt||0,label:"".concat(bt)},{value:lt||0,label:"".concat(lt," SOL")}].filter((function(e){return void 0!==e&&0!==e.value})),ht=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(De){e.next=2;break}return e.abrupt("return");case 2:return console.log("deposit"),Le(!0),e.prev=4,e.next=7,Object(H.c)(Ke,De,He);case 7:Le(!1),Fe({open:!0,message:"Congratulations! Bid ".concat((null===He||void 0===He?void 0:He.ticket.data)?"updated":"inserted","!"),severity:"success"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0),Le(!1),Fe({open:!0,message:"Something went wrong.",severity:"error"});case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),ft=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(De){e.next=2;break}return e.abrupt("return");case 2:return console.log("refund"),e.prev=3,Le(!0),e.next=7,Object(H.d)(De,He);case 7:Le(!1),Fe({open:!0,message:"Congratulations! You have received a refund. This is an irreversible action.",severity:"success"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),Le(!1),Fe({open:!0,message:"Something went wrong.",severity:"error"});case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),vt=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(De){e.next=2;break}return e.abrupt("return");case 2:return console.log("refund"),e.prev=3,Le(!0),e.next=7,Object(H.c)(0,De,He);case 7:Le(!1),Fe({open:!0,message:"Congratulations! Funds withdrawn. This is an irreversible action.",severity:"success"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),Le(!1),Fe({open:!0,message:"Something went wrong.",severity:"error"});case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),gt=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(De&&He&&He.ticket){e.next=2;break}return e.abrupt("return");case 2:return console.log("punch"),Le(!0),e.prev=4,e.next=7,Object(H.b)(De,He);case 7:Le(!1),Fe({open:!0,message:"Congratulations! Ticket punched!",severity:"success"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0),Le(!1),Fe({open:!0,message:"Something went wrong.",severity:"error"});case 16:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),mt=function(e,t){var n,r,a,i,c=(new Date).getTime(),s=null===(n=Object(V.f)(null===e||void 0===e?void 0:e.state.data.phaseOneStart))||void 0===n?void 0:n.getTime(),u=null===(r=Object(V.f)(null===e||void 0===e?void 0:e.state.data.phaseOneEnd))||void 0===r?void 0:r.getTime(),l=null===(a=Object(V.f)(null===e||void 0===e?void 0:e.state.data.phaseTwoEnd))||void 0===a?void 0:a.getTime(),d=null===(i=Object(V.f)(null===t||void 0===t?void 0:t.state.goLiveDate))||void 0===i?void 0:i.getTime();return s&&c<s?o.Phase0:u&&c<=u?o.Phase1:l&&c<=l?o.Phase2:(null===e||void 0===e?void 0:e.state.phaseThreeStarted)?(null===e||void 0===e?void 0:e.state.phaseThreeStarted)&&d&&c>d?o.Phase4:(null===e||void 0===e?void 0:e.state.phaseThreeStarted)?o.Phase3:o.Unknown:o.Lottery}(He,Ge),jt=(null===Ge||void 0===Ge?void 0:Ge.state.goLiveDate)&&(null===He||void 0===He?void 0:He.state.data.phaseTwoEnd)&&(null===Ge||void 0===Ge?void 0:Ge.state.goLiveDate.lt(null===He||void 0===He?void 0:He.state.data.phaseTwoEnd)),xt=!!(null!=Pe&&(null===He||void 0===He?void 0:He.state.data.priceRangeStart)&&(null===He||void 0===He?void 0:He.state.data.fee)&&Pe+((null===He||void 0===He||null===(t=He.ticket)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.amount.toNumber())||0)<Ke*I.LAMPORTS_PER_SOL+(null===He||void 0===He?void 0:He.state.data.fee.toNumber())+.01);return Object(L.jsxs)(j.a,{style:{marginTop:100},children:[Object(L.jsx)(j.a,{maxWidth:"xs",style:{position:"relative"},children:Object(L.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},children:Object(L.jsx)(x.a,{component:"button",variant:"body2",color:"textSecondary",align:"right",onClick:function(){ct(!0)},children:"Anti-Rug Policy"})})}),Object(L.jsx)(j.a,{maxWidth:"xs",style:{position:"relative"},children:Object(L.jsx)(w.a,{style:{padding:24,backgroundColor:"#151A1F",borderRadius:6},children:Object(L.jsxs)(T.a,{container:!0,justifyContent:"center",direction:"column",children:[mt===o.Phase0&&Object(L.jsx)(Z,{phaseName:"Phase 0",desc:"Anticipation Phase",date:null===He||void 0===He?void 0:He.state.data.phaseOneStart}),mt===o.Phase1&&Object(L.jsx)(Z,{phaseName:"Phase 1",desc:"Set price phase",date:null===He||void 0===He?void 0:He.state.data.phaseOneEnd}),mt===o.Phase2&&Object(L.jsx)(Z,{phaseName:"Phase 2",desc:"Grace period",date:null===He||void 0===He?void 0:He.state.data.phaseTwoEnd}),mt===o.Lottery&&Object(L.jsx)(Z,{phaseName:"Phase 3",desc:"Raffle in progress",date:null===He||void 0===He?void 0:He.state.data.phaseTwoEnd.add(null===He||void 0===He?void 0:He.state.data.lotteryDuration)}),mt===o.Phase3&&!Ge&&Object(L.jsx)(Z,{phaseName:"Phase 3",desc:"Raffle finished!",date:null===He||void 0===He?void 0:He.state.data.phaseTwoEnd}),mt===o.Phase3&&Ge&&Object(L.jsx)(Z,{phaseName:"Phase 3",desc:"Minting starts in...",date:null===Ge||void 0===Ge?void 0:Ge.state.goLiveDate}),mt===o.Phase4&&Object(L.jsx)(Z,{phaseName:jt?"Phase 3":"Phase 4",desc:"Candy Time \ud83c\udf6c \ud83c\udf6c \ud83c\udf6c",date:null===Ge||void 0===Ge?void 0:Ge.state.goLiveDate,status:"LIVE"}),He&&Object(L.jsx)(T.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:200,marginTop:20,marginBottom:20,background:"#384457",borderRadius:6},children:He.ticket.data?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(P.a,{children:"Your bid"}),Object(L.jsxs)(P.a,{variant:"h6",style:{fontWeight:900},children:[V.c.format(((null===He||void 0===He||null===(r=He.ticket.data)||void 0===r?void 0:r.amount.toNumber())||0)/I.LAMPORTS_PER_SOL)," ","SOL"]})]}):[o.Phase0,o.Phase1].includes(mt)?Object(L.jsxs)(P.a,{children:["You haven't entered this raffle yet. ",Object(L.jsx)("br",{}),(null===He||void 0===He||null===(a=He.state)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.fee)&&Object(L.jsx)("span",{children:Object(L.jsxs)("b",{children:["All initial bids will incur a \u25ce"," ",(null===He||void 0===He||null===(s=He.state)||void 0===s||null===(u=s.data)||void 0===u?void 0:u.fee.toNumber())/I.LAMPORTS_PER_SOL," ","fee."]})})]}):Object(L.jsx)(P.a,{children:"You didn't participate in this raffle."})}),He&&Object(L.jsxs)(L.Fragment,{children:[[o.Phase1,o.Phase2,o.Phase3,o.Lottery].includes(mt)&&(null===He||void 0===He||null===(l=He.ticket)||void 0===l||null===(b=l.data)||void 0===b?void 0:b.state.withdrawn)&&Object(L.jsx)("div",{style:{paddingTop:"15px"},children:Object(L.jsx)(B.a,{severity:"error",children:"Your bid was withdrawn and cannot be adjusted or re-inserted."})}),[o.Phase1,o.Phase2].includes(mt)&&He.state.currentMedian&&(null===He||void 0===He||null===(v=He.ticket)||void 0===v||null===(g=v.data)||void 0===g?void 0:g.amount)&&!(null===He||void 0===He||null===(m=He.ticket)||void 0===m||null===(S=m.data)||void 0===S?void 0:S.state.withdrawn)&&He.state.currentMedian.gt(null===He||void 0===He||null===(R=He.ticket)||void 0===R||null===(E=R.data)||void 0===E?void 0:E.amount)&&Object(L.jsx)("div",{style:{paddingTop:"15px"},children:Object(L.jsx)(B.a,{severity:"warning",children:"Your bid is currently below the median and will not be eligible for the raffle."})}),[o.Phase3,o.Lottery].includes(mt)&&He.state.currentMedian&&(null===He||void 0===He||null===(A=He.ticket)||void 0===A||null===(C=A.data)||void 0===C?void 0:C.amount)&&!(null===He||void 0===He||null===(D=He.ticket)||void 0===D||null===(Y=D.data)||void 0===Y?void 0:Y.state.withdrawn)&&He.state.currentMedian.gt(null===He||void 0===He||null===($=He.ticket)||void 0===$||null===(ee=$.data)||void 0===ee?void 0:ee.amount)&&Object(L.jsx)("div",{style:{paddingTop:"15px"},children:Object(L.jsxs)(B.a,{severity:"error",children:["Your bid was below the median and was not included in the raffle. You may click ",Object(L.jsx)("em",{children:"Withdraw"})," when the raffle ends or you will be automatically issued one when the Fair Launch authority withdraws from the treasury."]})}),xt&&Object(L.jsx)(B.a,{severity:"error",children:"You do not have enough SOL in your account to place this bid."})]}),[o.Phase1,o.Phase2].includes(mt)&&Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(T.a,{style:{marginTop:40,marginBottom:20},children:Object(L.jsx)(X,{min:ut,marks:pt,max:lt,step:dt,value:Ke,onChange:function(e,t){return Ne(t)},valueLabelDisplay:"auto",style:{width:"calc(100% - 40px)",marginLeft:20,height:30}})})}),Me.connected?Object(L.jsxs)("div",{children:[[o.Phase1,o.Phase2].includes(mt)&&Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(G,{onClick:ht,variant:"contained",disabled:Ee||!(null===He||void 0===He?void 0:He.ticket.data)&&mt===o.Phase2||xt,children:Ee?Object(L.jsx)(y.a,{}):(null===He||void 0===He?void 0:He.ticket.data)?"Change bid":"Place bid"})}),[o.Phase3].includes(mt)&&Object(L.jsxs)(L.Fragment,{children:[Q(He,Oe)&&Object(L.jsx)(G,{onClick:gt,variant:"contained",disabled:void 0!==(null===He||void 0===He||null===(te=He.ticket.data)||void 0===te?void 0:te.state.punched),children:Ee?Object(L.jsx)(y.a,{}):"Punch Ticket"}),!Q(He,Oe)&&Object(L.jsx)(G,{onClick:vt,variant:"contained",disabled:Ee||void 0===(null===He||void 0===He?void 0:He.ticket.data)||void 0!==(null===He||void 0===He||null===(ne=He.ticket.data)||void 0===ne?void 0:ne.state.withdrawn),children:Ee?Object(L.jsx)(y.a,{}):"Withdraw"})]}),mt===o.Phase4&&Object(L.jsxs)(L.Fragment,{children:[(!He||Q(He,Oe))&&Object(L.jsx)(z,{children:Object(L.jsx)(G,{disabled:(null===Ge||void 0===Ge?void 0:Ge.state.isSoldOut)||Ee||!(null===Ge||void 0===Ge?void 0:Ge.state.isActive)||(null===He||void 0===He||null===(re=He.ticket)||void 0===re||null===(ae=re.data)||void 0===ae?void 0:ae.state.punched)&&0===Oe,onClick:st,variant:"contained",children:(null===He||void 0===He||null===(ie=He.ticket)||void 0===ie||null===(oe=ie.data)||void 0===oe?void 0:oe.state.punched)&&0===Oe?"MINTED":(null===Ge||void 0===Ge?void 0:Ge.state.isSoldOut)?"SOLD OUT":Ee?Object(L.jsx)(y.a,{}):"MINT"})}),!Q(He,Oe)&&Object(L.jsx)(G,{onClick:vt,variant:"contained",disabled:Ee||void 0===(null===He||void 0===He?void 0:He.ticket.data)||void 0!==(null===He||void 0===He||null===(ce=He.ticket.data)||void 0===ce?void 0:ce.state.withdrawn),children:Ee?Object(L.jsx)(y.a,{}):"Withdraw"})]})]}):Object(L.jsxs)(q,{children:["Connect"," ",[o.Phase1].includes(mt)?"to bid":"to see status"]}),Object(L.jsxs)(T.a,{container:!0,justifyContent:"space-between",color:"textSecondary",children:[Object(L.jsx)(x.a,{component:"button",variant:"body2",color:"textSecondary",align:"left",onClick:function(){$e(!0)},children:"How this raffle works"}),(null===He||void 0===He?void 0:He.ticket.data)&&Object(L.jsx)(x.a,{component:"button",variant:"body2",color:"textSecondary",align:"right",onClick:function(){!He||mt===o.Lottery||Q(He,Oe)?rt(!0):vt()},children:"Withdraw funds"})]}),Object(L.jsx)(K.a,{open:nt,onClose:function(){return rt(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:Object(L.jsx)(M.a,{style:{padding:24},children:"During raffle phases, or if you are a winner, or if this website is not configured to be a fair launch but simply a candy machine, refunds are disallowed."})}),Object(L.jsx)(K.a,{open:ot,onClose:function(){ct(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:Object(L.jsxs)(M.a,{style:{padding:24},children:[!(null===He||void 0===He?void 0:He.state.data.antiRugSetting)&&Object(L.jsx)("span",{children:"This Fair Launch has no anti-rug settings."}),(null===He||void 0===He?void 0:He.state.data.antiRugSetting)&&He.state.data.antiRugSetting.selfDestructDate&&Object(L.jsxs)("div",{children:[Object(L.jsx)("h3",{children:"Anti-Rug Policy"}),Object(L.jsx)("p",{children:"This raffle is governed by a smart contract to prevent the artist from running away with your money."}),Object(L.jsx)("p",{children:"How it works:"}),"This project will retain"," ",He.state.data.antiRugSetting.reserveBp/100,"% (\u25ce"," ",(null===He||void 0===He?void 0:He.treasury)*He.state.data.antiRugSetting.reserveBp/(1e4*I.LAMPORTS_PER_SOL),") of the pledged amount in a locked state until all but"," ",He.state.data.antiRugSetting.tokenRequirement.toNumber()," ","NFTs (out of up to"," ",He.state.data.numberOfTokens.toNumber(),") have been minted.",Object(L.jsxs)("p",{children:["If more than"," ",He.state.data.antiRugSetting.tokenRequirement.toNumber()," ","NFTs remain as of"," ",null===(se=Object(V.f)(He.state.data.antiRugSetting.selfDestructDate))||void 0===se?void 0:se.toLocaleDateString()," ","at"," ",null===(ue=Object(V.f)(He.state.data.antiRugSetting.selfDestructDate))||void 0===ue?void 0:ue.toLocaleTimeString(),", you will have the option to get a refund of"," ",He.state.data.antiRugSetting.reserveBp/100,"% of the cost of your token."]}),(null===He||void 0===He||null===(le=He.ticket)||void 0===le?void 0:le.data)&&!(null===He||void 0===He||null===(de=He.ticket)||void 0===de?void 0:de.data.state.withdrawn)&&Object(L.jsx)(G,{onClick:ft,variant:"contained",disabled:!He.ticket.data||!He.ticket.data.state.punched||Date.now()/1e3<He.state.data.antiRugSetting.selfDestructDate.toNumber(),children:Ee?Object(L.jsx)(y.a,{}):Date.now()/1e3<He.state.data.antiRugSetting.selfDestructDate.toNumber()?Object(L.jsxs)("span",{children:["Refund in...",Object(L.jsx)(_.a,{date:Object(V.f)(He.state.data.antiRugSetting.selfDestructDate)})]}):"Refund"}),Object(L.jsx)("div",{style:{textAlign:"center",marginTop:"-5px"},children:(null===He||void 0===He||null===(be=He.ticket)||void 0===be?void 0:be.data)&&!(null===He||void 0===He||null===(pe=He.ticket)||void 0===pe||null===(he=pe.data)||void 0===he?void 0:he.state.punched)&&Object(L.jsx)("small",{children:"You currently have a ticket but it has not been punched yet, so cannot be refunded."})})]})]})}),Object(L.jsxs)(K.a,{open:Qe,onClose:function(){return $e(!1)},PaperProps:{style:{backgroundColor:"#222933",borderRadius:6}},children:[Object(L.jsxs)(N.a,{disableTypography:!0,style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(L.jsx)(x.a,{component:"button",variant:"h6",color:"textSecondary",onClick:function(){$e(!0)},children:"How it works"}),Object(L.jsx)(O.a,{"aria-label":"close",className:J.closeButton,onClick:function(){return $e(!1)},children:Object(L.jsx)(W.a,{})})]}),Object(L.jsxs)(M.a,{children:[Object(L.jsx)(P.a,{variant:"h6",children:"Phase 1 - Set the fair price:"}),Object(L.jsxs)(P.a,{gutterBottom:!0,color:"textSecondary",children:['Enter a bid in the range provided by the artist. The median of all bids will be the "fair" price of the raffle ticket.'," ",(null===He||void 0===He||null===(fe=He.state)||void 0===fe||null===(ve=fe.data)||void 0===ve?void 0:ve.fee)&&Object(L.jsx)("span",{children:Object(L.jsxs)("b",{children:["All bids will incur a \u25ce"," ",(null===He||void 0===He||null===(ge=He.state)||void 0===ge||null===(me=ge.data)||void 0===me?void 0:me.fee.toNumber())/I.LAMPORTS_PER_SOL," ","fee."]})})]}),Object(L.jsx)(P.a,{variant:"h6",children:"Phase 2 - Grace period:"}),Object(L.jsx)(P.a,{gutterBottom:!0,color:"textSecondary",children:"If your bid was at or above the fair price, you automatically get a raffle ticket at that price. There's nothing else you need to do. Your excess SOL will be returned to you when the Fair Launch authority withdraws from the treasury. If your bid is below the median price, you can still opt in at the fair price during this phase."}),jt?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(P.a,{variant:"h6",children:"Phase 3 - The Candy Machine:"}),Object(L.jsx)(P.a,{gutterBottom:!0,color:"textSecondary",children:"Everyone who got a raffle ticket at the fair price is entered to win an NFT. If you win an NFT, congrats. If you don\u2019t, no worries, your SOL will go right back into your wallet."})]}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(P.a,{variant:"h6",children:"Phase 3 - The Lottery:"}),Object(L.jsx)(P.a,{gutterBottom:!0,color:"textSecondary",children:"Everyone who got a raffle ticket at the fair price is entered to win a Fair Launch Token that entitles them to an NFT at a later date using a Candy Machine here. If you don\u2019t win, no worries, your SOL will go right back into your wallet."}),Object(L.jsx)(P.a,{variant:"h6",children:"Phase 4 - The Candy Machine:"}),Object(L.jsxs)(P.a,{gutterBottom:!0,color:"textSecondary",children:["On"," ",(null===Ge||void 0===Ge?void 0:Ge.state.goLiveDate)?null===(je=Object(V.f)(null===Ge||void 0===Ge?void 0:Ge.state.goLiveDate))||void 0===je?void 0:je.toLocaleString():" some later date",", you will be able to exchange your Fair Launch token for an NFT using the Candy Machine at this site by pressing the Mint Button."]})]})]})]})]})})}),He&&Object(L.jsx)(j.a,{maxWidth:"xs",style:{position:"relative",marginTop:10},children:Object(L.jsx)("div",{style:{margin:20},children:Object(L.jsxs)(T.a,{container:!0,direction:"row",wrap:"nowrap",children:[Object(L.jsxs)(T.a,{container:!0,md:4,direction:"column",children:[Object(L.jsx)(P.a,{variant:"body2",color:"textSecondary",children:"Bids"}),Object(L.jsx)(P.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:(null===He||void 0===He?void 0:He.state.numberTicketsSold.toNumber())||0})]}),Object(L.jsxs)(T.a,{container:!0,md:4,direction:"column",children:[Object(L.jsx)(P.a,{variant:"body2",color:"textSecondary",children:"Median bid"}),Object(L.jsxs)(P.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:["\u25ce ",V.c.format(bt)]})]}),Object(L.jsxs)(T.a,{container:!0,md:4,direction:"column",children:[Object(L.jsx)(P.a,{variant:"body2",color:"textSecondary",children:"Total raised"}),Object(L.jsxs)(P.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:["\u25ce"," ",V.c.format(((null===He||void 0===He?void 0:He.treasury)||0)/I.LAMPORTS_PER_SOL)]})]})]})})}),Object(L.jsx)(k.a,{open:Ie.open,autoHideDuration:6e3,onClose:function(){return Fe(Object(d.a)(Object(d.a)({},Ie),{},{open:!1}))},children:Object(L.jsx)(B.a,{onClose:function(){return Fe(Object(d.a)(Object(d.a)({},Ie),{},{open:!1}))},severity:Ie.severity,children:Ie.message})})]})},ee=n(33),te=n(232),ne=n(120),re=n(777),ae=n(486),ie=s.a.createContext(null),oe=function(e){var t=e.children,n=void 0===t?null:t,r=Object(c.useRef)(),a=Object(c.useRef)(),i=Object(c.useMemo)((function(){return function(){var e;a.current&&r.current&&(r.current.style.visibility="visible",null===(e=a.current({particleCount:400,spread:160,origin:{y:.3}}))||void 0===e||e.finally((function(){r.current&&(r.current.style.visibility="hidden")})))}}),[]);Object(c.useEffect)((function(){r.current&&!a.current&&(r.current.style.visibility="hidden",a.current=ae.a.create(r.current,{resize:!0,useWorker:!0}))}),[]);return Object(L.jsxs)(ie.Provider,{value:{dropConfetti:i},children:[Object(L.jsx)("canvas",{ref:r,style:{width:"100vw",height:"100vh",position:"absolute",zIndex:1,top:0,left:0}}),n]})},ce=Object(ne.b)({palette:{type:"dark"}}),se=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CANDY_MACHINE_ID?new ee.e.PublicKey(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CANDY_MACHINE_ID):void 0,ue=new ee.e.PublicKey(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FAIR_LAUNCH_ID),le=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SOLANA_NETWORK,de=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SOLANA_RPC_HOST,be=new ee.e.Connection(de),pe=parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CANDY_START_DATE,10),he=function(){var e=Object(c.useMemo)((function(){return Object(I.clusterApiUrl)(le)}),[]),t=Object(c.useMemo)((function(){return[Object(te.getPhantomWallet)(),Object(te.getSolflareWallet)(),Object(te.getSolletWallet)()]}),[]);return Object(L.jsx)(re.a,{theme:ce,children:Object(L.jsx)(F.ConnectionProvider,{endpoint:e,children:Object(L.jsx)(F.WalletProvider,{wallets:t,autoConnect:!0,children:Object(L.jsx)(Y.WalletDialogProvider,{children:Object(L.jsx)(oe,{children:Object(L.jsx)($,{candyMachineId:se,fairLaunchId:ue,connection:be,startDate:pe,txTimeout:3e4})})})})})})},fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,793)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};l.a.render(Object(L.jsx)(s.a.StrictMode,{children:Object(L.jsx)(he,{})}),document.getElementById("root")),fe()}},[[759,1,2]]]);
//# sourceMappingURL=main.8fedd6b6.chunk.js.map